(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{32:function(e,t,a){},33:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),s=(a(31),a(32),a(3)),i=a(4),l=a(6),u=a(5),h=(a(33),a(12)),p=(a(34),a(8),a(1)),d=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:""},e.handleChange=function(t){e.setState({value:t.target.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.value.trim()?(e.props.onSubmit(e.state.value),e.setState({value:""})):h.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435!")},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(p.jsx)("header",{className:"Searchbar",children:Object(p.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(p.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(p.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(p.jsx)("input",{className:"SearchForm-input",type:"text",value:this.state.value,onChange:this.handleChange,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(n.Component),j=d,b=a(15),m=a(14),v=a.n(m),g=a(24),f=a(25),O=a.n(f),y=function(){function e(t,a){Object(s.a)(this,e),this.base_url=t,this.api_key=a,this._value="",this._page=1}return Object(i.a)(e,[{key:"value",get:function(){return this._value},set:function(e){return this._value=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}},{key:"searchImages",value:function(){var e=Object(g.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.base_url,"?q=").concat(this.value,"&page=").concat(this.page,"&key=").concat(this.api_key,"&image_type=photo&orientation=horizontal&per_page=12"),e.prev=1,e.next=4,O.a.get(t);case 4:return a=e.sent,n=a.data.hits,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),k=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClickGalleryItem=function(){e.props.onClose(e.props.largeImageURL)},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(p.jsx)("li",{className:"ImageGalleryItem",onClick:this.onClickGalleryItem,children:Object(p.jsx)("img",{src:this.props.webformatURL,alt:this.props.id,className:"ImageGalleryItem-image"})})}}]),a}(n.Component),x=k,w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"Button-div",children:Object(p.jsx)("button",{className:"Button",type:"button",onClick:this.props.onClick,children:"LoadMore"})})}}]),a}(n.Component),C=w,S=a(26),I=a.n(S),L=(a(75),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(p.jsx)(I.a,{type:"Circles",color:"#3f51b5",height:100,width:100,timeout:3e3})}}]),a}(n.Component)),N=L,U=new y("https://pixabay.com/api/","23089683-10e6383e94187ff47334541d4"),_=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={arr:[],status:"idle"},e.handleClick=function(){U.page=1,U.searchImages().then((function(t){e.setState((function(e){return{arr:[].concat(Object(b.a)(e.arr),Object(b.a)(t)),status:"resolved"}}))})).catch((function(t){console.log(t),e.setState({status:"error"})}))},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;e.value!==this.props.value&&(this.setState({status:"pending"}),U.resetPage(),U.value=this.props.value,U.searchImages().then((function(e){t.setState({arr:e,status:"resolved"})})).catch((function(e){console.log(e),t.setState({status:"error"})}))),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.status,n=t.arr;return"idle"===a?Object(p.jsx)("p",{children:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u043e\u0438\u0441\u043a \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439"}):0===n.length?Object(p.jsx)("p",{children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0441 \u0442\u0430\u043a\u0438\u043c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c, \u043a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043d\u0435\u0442"}):"pending"===a?Object(p.jsx)("div",{className:"Loader",children:Object(p.jsx)(N,{})}):"error"===a?Object(p.jsx)("h1",{children:"Error!"}):"resolved"===a?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("ul",{className:"ImageGallery",children:n.map((function(t){var a=t.id,n=t.webformatURL,r=t.largeImageURL;return Object(p.jsx)(x,{webformatURL:n,largeImageURL:r,onClose:e.props.onClose},a)}))}),Object(p.jsx)(C,{onClick:this.handleClick})]}):void 0}}]),a}(n.Component),M=_,R=document.querySelector("#modal-root"),F=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleOverlayClick=function(t){t.target===t.currentTarget&&e.props.onClose()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props.largeImageURL;return console.log("largeImage in modal",e),Object(o.createPortal)(Object(p.jsx)("div",{className:"Overlay",onClick:this.handleOverlayClick,children:Object(p.jsx)("div",{className:"Modal",children:Object(p.jsx)("img",{src:e,alt:e})})}),R)}}]),a}(n.Component),A=F,D=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:"",showModal:!1,largeImageURL:""},e.handleSubmitForm=function(t){e.setState({value:t})},e.toggleModal=function(t){e.setState((function(e){return{showModal:!e.showModal,largeImageURL:t}})),console.log("this.state in App:",e.state)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.value,a=e.showModal,n=e.largeImageURL;return Object(p.jsxs)("div",{children:[Object(p.jsx)(j,{onSubmit:this.handleSubmitForm}),Object(p.jsx)(M,{value:t,onClose:this.toggleModal}),Object(p.jsx)(h.a,{autoClose:2e3}),a&&Object(p.jsx)(A,{value:t,onClose:this.toggleModal,largeImageURL:n})]})}}]),a}(n.Component),E=D;c.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(E,{})}),document.getElementById("root"))},8:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.52fa6fc8.chunk.js.map