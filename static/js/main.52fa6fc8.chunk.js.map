{"version":3,"sources":["components/Searchbar.js","services/api.js","components/ImageGalleryItem.js","components/Button.js","components/Loader.js","components/ImageGallery.js","components/Modal.js","App.js","index.js"],"names":["Searchbar","state","value","handleChange","e","setState","target","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","this","type","onChange","autoComplete","autoFocus","placeholder","Component","FetchApi","base_url","api_key","_value","_page","a","url","page","axios","get","result","data","hits","message","ImageGalleryItem","onClickGalleryItem","onClose","largeImageURL","onClick","src","webformatURL","alt","id","Button","LoaderSpin","color","height","width","timeout","newFetchApi","ImageGallery","arr","status","handleClick","searchImages","then","prev","catch","err","console","log","prevProps","resetPage","window","scrollTo","top","document","documentElement","scrollHeight","behavior","length","Loader","map","modalRoot","querySelector","Modal","handleKeyDown","code","handleOverlayClick","currentTarget","addEventListener","removeEventListener","createPortal","App","showModal","handleSubmitForm","toggleModal","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"wTAKMA,E,4MACJC,MAAQ,CACNC,MAAO,I,EAGTC,aAAe,SAAAC,GAEb,EAAKC,SAAS,CAAEH,MAAOE,EAAEE,OAAOJ,MAAMK,iB,EAIxCC,aAAe,SAAAJ,GACbA,EAAEK,iBAC8B,KAA5B,EAAKR,MAAMC,MAAMQ,QAKrB,EAAKC,MAAMC,SAAS,EAAKX,MAAMC,OAC/B,EAAKG,SAAS,CAAEH,MAAO,MALrBW,IAAMC,MAAM,8J,4CAQhB,WACE,OACE,wBAAQC,UAAU,YAAlB,SACE,uBAAMA,UAAU,aAAaH,SAAUI,KAAKR,aAA5C,UACE,wBAAQS,KAAK,SAASF,UAAU,oBAAhC,SACE,sBAAMA,UAAU,0BAAhB,sBAGF,uBACEA,UAAU,mBACVE,KAAK,OAELf,MAAOc,KAAKf,MAAMC,MAClBgB,SAAUF,KAAKb,aACfgB,aAAa,MACbC,WAAS,EACTC,YAAY,sC,GAtCAC,aA8CTtB,I,kDCjDFuB,EAAb,WACE,WAAYC,EAAUC,GAAU,oBAC9BT,KAAKQ,SAAWA,EAChBR,KAAKS,QAAUA,EACfT,KAAKU,OAAS,GACdV,KAAKW,MAAQ,EALjB,uCAOE,WACE,OAAOX,KAAKU,QARhB,IAUE,SAAUxB,GACR,OAAQc,KAAKU,OAASxB,IAX1B,gBAaE,WACE,OAAOc,KAAKW,OAdhB,IAgBE,SAASzB,GACP,OAAQc,KAAKW,OAASzB,IAjB1B,uBAmBE,WACE,OAAQc,KAAKW,MAAQ,IApBzB,iEAuBE,gCAAAC,EAAA,6DACMC,EADN,UACeb,KAAKQ,SADpB,cACkCR,KAAKd,MADvC,iBACqDc,KAAKc,KAD1D,gBACsEd,KAAKS,QAD3E,0EAGyBM,IAAMC,IAAIH,GAHnC,cAGUI,EAHV,OAIUC,EAAOD,EAAOC,KAAKC,KAJ7B,kBAKWD,GALX,yDAOW,KAAIE,SAPf,yDAvBF,6DCCMC,E,4MACJC,mBAAqB,WACnB,EAAK3B,MAAM4B,QAAQ,EAAK5B,MAAM6B,gB,4CAGhC,WACE,OACE,oBAAIzB,UAAU,mBAAmB0B,QAASzB,KAAKsB,mBAA/C,SACE,qBACEI,IAAK1B,KAAKL,MAAMgC,aAChBC,IAAK5B,KAAKL,MAAMkC,GAChB9B,UAAU,iC,GAXWO,aAkBhBe,IClBTS,E,4JACJ,WACE,OACE,qBAAK/B,UAAU,aAAf,SACE,wBAAQA,UAAU,SAASE,KAAK,SAASwB,QAASzB,KAAKL,MAAM8B,QAA7D,4B,GAJanB,aAYNwB,I,iBCXTC,G,kKACJ,WACE,OACE,cAAC,IAAD,CACE9B,KAAK,UACL+B,MAAM,UACNC,OAAQ,IACRC,MAAO,IACPC,QAAS,U,GARQ7B,cAcVyB,ICTTK,EAAc,IAAI7B,EAFV,2BACD,sCAGP8B,E,4MACJpD,MAAQ,CACNqD,IAAK,GACLC,OAAQ,Q,EAwBVC,YAAc,WACZJ,EAAYtB,KAAO,EACnBsB,EACGK,eACAC,MAAK,SAAAJ,GACJ,EAAKjD,UAAS,SAAAsD,GAAI,MAAK,CACrBL,IAAI,GAAD,mBAAMK,EAAKL,KAAX,YAAmBA,IACtBC,OAAQ,kBAGXK,OAAM,SAAAC,GACLC,QAAQC,IAAIF,GACZ,EAAKxD,SAAS,CAAEkD,OAAQ,c,wDAjC9B,SAAmBS,GAAY,IAAD,OACxBA,EAAU9D,QAAUc,KAAKL,MAAMT,QACjCc,KAAKX,SAAS,CAAEkD,OAAQ,YACxBH,EAAYa,YACZb,EAAYlD,MAAQc,KAAKL,MAAMT,MAC/BkD,EACGK,eACAC,MAAK,SAAAxB,GACJ,EAAK7B,SAAS,CAAEiD,IAAKpB,EAAMqB,OAAQ,gBAEpCK,OAAM,SAAAC,GACLC,QAAQC,IAAIF,GACZ,EAAKxD,SAAS,CAAEkD,OAAQ,cAG9BW,OAAOC,SAAS,CACdC,IAAKC,SAASC,gBAAgBC,aAC9BC,SAAU,a,oBAoBd,WAAU,IAAD,OACP,EAAwBxD,KAAKf,MAArBsD,EAAR,EAAQA,OAAQD,EAAhB,EAAgBA,IAEhB,MAAe,SAAXC,EACK,6KAGU,IAAfD,EAAImB,OACC,mRAGM,YAAXlB,EAEA,qBAAKxC,UAAU,SAAf,SACE,cAAC2D,EAAD,MAKS,UAAXnB,EACK,wCAGM,aAAXA,EAEA,qCACE,oBAAIxC,UAAU,eAAd,SACGuC,EAAIqB,KAAI,gBAAG9B,EAAH,EAAGA,GAAIF,EAAP,EAAOA,aAAcH,EAArB,EAAqBA,cAArB,OACP,cAAC,EAAD,CAEEG,aAAcA,EACdH,cAAeA,EACfD,QAAS,EAAK5B,MAAM4B,SAHfM,QAOX,cAAC,EAAD,CAAQJ,QAASzB,KAAKwC,sBAb5B,M,GAlEuBlC,aAsFZ+B,IC7FTuB,EAAYP,SAASQ,cAAc,eAEnCC,E,4MASJC,cAAgB,SAAA3E,GACC,WAAXA,EAAE4E,MACJ,EAAKrE,MAAM4B,W,EAIf0C,mBAAqB,SAAA7E,GACfA,EAAEE,SAAWF,EAAE8E,eACjB,EAAKvE,MAAM4B,W,uDAhBf,WACE2B,OAAOiB,iBAAiB,UAAWnE,KAAK+D,iB,kCAG1C,WACEb,OAAOkB,oBAAoB,UAAWpE,KAAK+D,iB,oBAe7C,WACE,IAAQvC,EAAkBxB,KAAKL,MAAvB6B,cAER,OADAsB,QAAQC,IAAI,sBAAuBvB,GAC5B6C,uBACL,qBAAKtE,UAAU,UAAU0B,QAASzB,KAAKiE,mBAAvC,SACE,qBAAKlE,UAAU,QAAf,SACE,qBAAK2B,IAAKF,EAAeI,IAAKJ,QAGlCoC,O,GA9BctD,aAmCLwD,IChCTQ,E,4MACJrF,MAAQ,CACNC,MAAO,GACPqF,WAAW,EACX/C,cAAe,I,EAGjBgD,iBAAmB,SAAAtF,GACjB,EAAKG,SAAS,CAAEH,W,EAGlBuF,YAAc,SAAAjD,GACZ,EAAKnC,UAAS,SAAAJ,GAAK,MAAK,CACtBsF,WAAYtF,EAAMsF,UAClB/C,cAAeA,MAEjBsB,QAAQC,IAAI,qBAAsB,EAAK9D,Q,4CAGzC,WACE,MAA4Ce,KAAKf,MAAzCC,EAAR,EAAQA,MAAOqF,EAAf,EAAeA,UAAW/C,EAA1B,EAA0BA,cAC1B,OACE,gCACE,cAAC,EAAD,CAAW5B,SAAUI,KAAKwE,mBAC1B,cAAC,EAAD,CAActF,MAAOA,EAAOqC,QAASvB,KAAKyE,cAC1C,cAAC,IAAD,CAAgBC,UAAW,MAC1BH,GACC,cAAC,EAAD,CACErF,MAAOA,EACPqC,QAASvB,KAAKyE,YACdjD,cAAeA,W,GA9BTlB,aAsCHgE,ICzCfK,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFxB,SAASyB,eAAe,U","file":"static/js/main.52fa6fc8.chunk.js","sourcesContent":["import { Component } from 'react';\r\nimport '../components/styles.css';\r\n\r\nimport { toast } from 'react-toastify';\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    value: '',\r\n  };\r\n\r\n  handleChange = e => {\r\n    // console.log(e.target.value);\r\n    this.setState({ value: e.target.value.toLowerCase() });\r\n    // console.log(this.state);\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    if (this.state.value.trim() === '') {\r\n      toast.error('Введите корректное название!');\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(this.state.value);\r\n    this.setState({ value: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            // name=\"value\"\r\n            value={this.state.value}\r\n            onChange={this.handleChange}\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import axios from 'axios';\r\n\r\nexport class FetchApi {\r\n  constructor(base_url, api_key) {\r\n    this.base_url = base_url;\r\n    this.api_key = api_key;\r\n    this._value = '';\r\n    this._page = 1;\r\n  }\r\n  get value() {\r\n    return this._value;\r\n  }\r\n  set value(value) {\r\n    return (this._value = value);\r\n  }\r\n  get page() {\r\n    return this._page;\r\n  }\r\n  set page(value) {\r\n    return (this._page += value);\r\n  }\r\n  resetPage() {\r\n    return (this._page = 1);\r\n  }\r\n\r\n  async searchImages() {\r\n    let url = `${this.base_url}?q=${this.value}&page=${this.page}&key=${this.api_key}&image_type=photo&orientation=horizontal&per_page=12`;\r\n    try {\r\n      const result = await axios.get(url);\r\n      const data = result.data.hits;\r\n      return data;\r\n    } catch (err) {\r\n      return err.message;\r\n    }\r\n  }\r\n}\r\n","import { Component } from 'react';\r\nimport '../components/styles.css';\r\n\r\nclass ImageGalleryItem extends Component {\r\n  onClickGalleryItem = () => {\r\n    this.props.onClose(this.props.largeImageURL);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <li className=\"ImageGalleryItem\" onClick={this.onClickGalleryItem}>\r\n        <img\r\n          src={this.props.webformatURL}\r\n          alt={this.props.id}\r\n          className=\"ImageGalleryItem-image\"\r\n        />\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGalleryItem;\r\n","import { Component } from 'react';\r\nimport '../components/styles.css';\r\n\r\nclass Button extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"Button-div\">\r\n        <button className=\"Button\" type=\"button\" onClick={this.props.onClick}>\r\n          LoadMore\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Button;\r\n","import { Component } from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\nclass LoaderSpin extends Component {\r\n  render() {\r\n    return (\r\n      <Loader\r\n        type=\"Circles\"\r\n        color=\"#3f51b5\"\r\n        height={100}\r\n        width={100}\r\n        timeout={3000}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoaderSpin;\r\n","import { Component } from 'react';\r\nimport '../components/styles.css';\r\nimport { FetchApi } from '../services/api';\r\nimport ImageGalleryItem from './ImageGalleryItem';\r\nimport Button from './Button';\r\nimport LoaderSpin from '../components/Loader';\r\n\r\nconst base_url = `https://pixabay.com/api/`;\r\nconst api_key = `23089683-10e6383e94187ff47334541d4`;\r\nconst newFetchApi = new FetchApi(base_url, api_key);\r\n\r\nclass ImageGallery extends Component {\r\n  state = {\r\n    arr: [],\r\n    status: 'idle',\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.value !== this.props.value) {\r\n      this.setState({ status: 'pending' });\r\n      newFetchApi.resetPage();\r\n      newFetchApi.value = this.props.value;\r\n      newFetchApi\r\n        .searchImages()\r\n        .then(data => {\r\n          this.setState({ arr: data, status: 'resolved' });\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n          this.setState({ status: 'error' });\r\n        });\r\n    }\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  }\r\n\r\n  handleClick = () => {\r\n    newFetchApi.page = 1;\r\n    newFetchApi\r\n      .searchImages()\r\n      .then(arr => {\r\n        this.setState(prev => ({\r\n          arr: [...prev.arr, ...arr],\r\n          status: 'resolved',\r\n        }));\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        this.setState({ status: 'error' });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const { status, arr } = this.state;\r\n\r\n    if (status === 'idle') {\r\n      return <p>Начните поиск изображений</p>;\r\n    }\r\n\r\n    if (arr.length === 0) {\r\n      return <p>Изображений с таким названием, к сожалению, нет</p>;\r\n    }\r\n\r\n    if (status === 'pending') {\r\n      return (\r\n        <div className=\"Loader\">\r\n          <LoaderSpin />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (status === 'error') {\r\n      return <h1>Error!</h1>;\r\n    }\r\n\r\n    if (status === 'resolved') {\r\n      return (\r\n        <>\r\n          <ul className=\"ImageGallery\">\r\n            {arr.map(({ id, webformatURL, largeImageURL }) => (\r\n              <ImageGalleryItem\r\n                key={id}\r\n                webformatURL={webformatURL}\r\n                largeImageURL={largeImageURL}\r\n                onClose={this.props.onClose}\r\n              />\r\n            ))}\r\n          </ul>\r\n          <Button onClick={this.handleClick} />\r\n        </>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default ImageGallery;\r\n","import { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport '../components/styles.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleOverlayClick = e => {\r\n    if (e.target === e.currentTarget) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { largeImageURL } = this.props;\r\n    console.log('largeImage in modal', largeImageURL);\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.handleOverlayClick}>\r\n        <div className=\"Modal\">\r\n          <img src={largeImageURL} alt={largeImageURL} />\r\n        </div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import './App.css';\r\nimport { Component } from 'react';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport './components/styles.css';\r\nimport Searchbar from './components/Searchbar';\r\nimport ImageGallery from './components/ImageGallery';\r\nimport Modal from './components/Modal';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    value: '',\r\n    showModal: false,\r\n    largeImageURL: '',\r\n  };\r\n\r\n  handleSubmitForm = value => {\r\n    this.setState({ value });\r\n  };\r\n\r\n  toggleModal = largeImageURL => {\r\n    this.setState(state => ({\r\n      showModal: !state.showModal,\r\n      largeImageURL: largeImageURL,\r\n    }));\r\n    console.log('this.state in App:', this.state);\r\n  };\r\n\r\n  render() {\r\n    const { value, showModal, largeImageURL } = this.state;\r\n    return (\r\n      <div>\r\n        <Searchbar onSubmit={this.handleSubmitForm} />\r\n        <ImageGallery value={value} onClose={this.toggleModal} />\r\n        <ToastContainer autoClose={2000} />\r\n        {showModal && (\r\n          <Modal\r\n            value={value}\r\n            onClose={this.toggleModal}\r\n            largeImageURL={largeImageURL}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'modern-normalize/modern-normalize.css';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}